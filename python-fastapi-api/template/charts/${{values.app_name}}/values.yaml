# ============================================================
# DEFAULT VALUES (BASE)
#
# This file defines DEFAULTS and PLATFORM CONTRACTS.
# It must be environment-agnostic.
#
# DO NOT put:
# - environment-specific values (stage/prod)
# - secrets
# - domain names
#
# Ownership:
# - Platform team owns this file
# ============================================================

# ------------------------------------------------------------
# Application identity
# ------------------------------------------------------------

# Canonical service identifier.
# MUST be stable and injected by Backstage.
# Used for:
# - SSM secret paths
# - naming consistency
serviceName: ""

# ------------------------------------------------------------
# Image
# ------------------------------------------------------------
image:
  repository: ""
  tag: ""
  pullPolicy: IfNotPresent

imagePullSecrets: []

# ------------------------------------------------------------
# Naming
# ------------------------------------------------------------
nameOverride: ""
fullnameOverride: ""

# ------------------------------------------------------------
# Service Account
# ------------------------------------------------------------
serviceAccount:
  create: false
  automount: true
  annotations: {}
  name: ""

# ------------------------------------------------------------
# Pod metadata
# ------------------------------------------------------------
podAnnotations: {}
podLabels: {}

# ------------------------------------------------------------
# Security
# ------------------------------------------------------------
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  runAsUser: 1000

# ------------------------------------------------------------
# Service / Networking
# ------------------------------------------------------------
service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  className: nginx
  annotations: {}
  hosts: []
  tls: []

# ------------------------------------------------------------
# Probes
# ------------------------------------------------------------
livenessProbe:
  httpGet:
    path: /health
    port: http
  periodSeconds: 10
  timeoutSeconds: 2
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /ready
    port: http
  periodSeconds: 5
  timeoutSeconds: 2
  failureThreshold: 3

# ------------------------------------------------------------
# Resources
# ------------------------------------------------------------
resources: {}

# ------------------------------------------------------------
# Autoscaling
# ------------------------------------------------------------
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80

# ============================================================
# PLATFORM CONTEXT (INTERNAL USE)
#
# These values describe WHERE the app is running.
# They are NOT application configuration.
#
# Ownership:
# - Platform team only
# - Injected by Backstage
# ============================================================
platform:
  context:
    system: ""   # e.g. popapps, agentix
    env: ""      # stage | prod

  # ----------------------------------------------------------
  # Secrets delivery via External Secrets Operator (ESO)
  # Pulls from AWS SSM parameters created by CI/CD
  # ----------------------------------------------------------
  secrets:
    external:
      enabled: true
      storeKind: ClusterSecretStore
      storeName: aws-ssm
      refreshInterval: 1h
      deletionPolicy: Delete

# ============================================================
# Application configuration (NON-SECRET)
#
# This maps directly to environment variables via ConfigMap.
# ============================================================
config: {}

# ============================================================
# Additional environment variables
# ============================================================
env: []

